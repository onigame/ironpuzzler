<html>
<head>
<title>Admin - Iron Puzzler</title>
<link rel="stylesheet" href="static/style.css">
</head><body><div class="pagecontent">

<h2 style="margin-bottom: 0">
<a href="/">Iron Puzzler</a> &raquo; Administration</h2>

<p style="margin-top: 0">
<em>{{ user_email }}</em>
(<a href="{{ user_logout_url }}">sign out</a>).</p>

{% if user_ok %}

<form action="/admin" method="post">
<h3>Secret ingredients</h3>

<p>
1. <input type="text" name="ingredient0" value="{{ game.ingredients.0 }}"> 
2. <input type="text" name="ingredient1" value="{{ game.ingredients.1 }}"> 
3. <input type="text" name="ingredient2" value="{{ game.ingredients.2 }}"> 
<label>
  <input type="checkbox" name="ingredients_visible" value="true"
    {% if game.ingredients_visible %} checked {% endif %} >
  Make visible
</label>
</p>

<h3>Teams and puzzles</h3>

<table cellpadding=0 cellspacing=0 border=0>
<tr>
  <td>Team</td>
  <td style="width: 1em">&nbsp;</td> <td>nonpaper</td>
  <td style="width: 1em">&nbsp;</td> <td>paper</td>
</tr>
{% for team in teams %}
  <tr>
    <td><a href="/team?t={{ team.key_id }}">{{ team.name }}</a></td>
    <td></td>
    <td>
      <a href="/puzzle?t={{ team.key_id }}&p=nonpaper">
        {% if team.puzzles.nonpaper.number %}
          #{{ team.puzzles.nonpaper.number }}
        {% endif %}
        {{ team.puzzles.nonpaper.title|default:"Untitled" }}
      </a>
    </td>
    <td></td>
    <td>
      <a href="/puzzle?t={{ team.key_id }}&p=paper">
        {% if team.puzzles.paper.number %}
          #{{ team.puzzles.paper.number }}
        {% endif %}
        {{ team.puzzles.paper.title|default:"Untitled" }}
      </a>
    </td>
  </tr>
{% endfor %}
</table>
<div style="margin-top: 5">
  <label>new: <input type="text" name="new_team" id="add_team" size="25"></label>
  <label>pw: <input type="text" name="new_password" size="10"></label>
</div>

<p><label><input type="checkbox" name="assign_numbers" value="true">
Assign puzzle numbers now
</label><br>
<label><input type="checkbox" name="login_enabled" value="true"
  {% if game.login_enabled %} checked {% endif %} >
Enable team logins
</label><br>
<label><input type="checkbox" name="solving_enabled" value="true"
  {% if game.solving_enabled %} checked {% endif %} >
Enable answer submission
</p>

<h3>Access to this admin page</h3>

<textarea name="admin_users" cols="40" rows="5" class="leftside">
{{ game.admin_users|join:"&#10;" }}</textarea>

<p class="rightside">Google usernames (eg. <em>joe.smith@gmail.com</em>),
separated by lines or commas.</p>

<p><button>Submit changes</button></p>
</form>

{% else %} {# not user_ok #}

<h3 class="error">Admin access denied</h3>

{% endif %} {# user_ok #}

</div></body></html>  <!-- end .pagecontent -->

<html>
<head>
<title>Admin - Iron Puzzler</title>
<link rel="stylesheet" href="static/style.css">
</head><body><div class="pagecontent">

<h2 style="margin-bottom: 0">
<a href="/">Iron Puzzler</a> &raquo; Administration</h2>

<p style="margin-top: 0">
<em>{{ user_email }}</em>
(<a href="{{ user_logout_url }}">sign out</a>).</p>

<form action="/admin" method="post">
<h3>Secret ingredients</h3>

<p>
1. <input type="text" name="ingredient0" value="{{ game.ingredients.0 }}"> 
2. <input type="text" name="ingredient1" value="{{ game.ingredients.1 }}"> 
3. <input type="text" name="ingredient2" value="{{ game.ingredients.2 }}"> 
<label>
  <input type="checkbox" name="ingredients_visible" value="true"
    {% if game.ingredients_visible %} checked {% endif %} >
  Make visible
</label>
</p>

<h3>Teams and puzzles</h3>

<table cellpadding=0 cellspacing=0 border=0>
<tr>
  <td> </td>
  {% for puzzle in puzzles %}
    <td style="width: 0.5em">&nbsp;</td>
    <td align="center">
      <a href="/puzzle?t={{ puzzle.team.key_id }}&p={{ puzzle.key_name }}" title="#{{ puzzle.number }} &quot;{{ puzzle.title|default:"Untitled" }}&quot; ({{ puzzle.key_name }}) by {{ puzzle.team.name }}">#{{ puzzle.number }}</a>
    </td>
  {% endfor %}
</tr>
  {% for team in teams %}
    <tr>
      <td><a href="/team?t={{ team.key_id }}">{{ team.name }}</a></td>
      {% for puzzle in team.puzzles %}
        <td></td>
        <td align="center">
          {% if puzzle.name %}
            <a href="/puzzle?t={{ team.key_id }}&p={{ puzzle.name }}" 
               class="puzzle_author"
               title="{{ team.name }} authored #{{ puzzle.number }} &quot;{{ puzzle.title|default:"Untitled" }}&quot;">
              A
            </a>
          {% else %}
            {% if puzzle.solve_rank %}
              <a href="/guess?t={{ team.key_id }}&n={{ puzzle.number }}"
                 class="guess_correct"
                 title="{{ team.name }} solved #{{ puzzle.number }} &quot;{{ puzzle.title|default:"Untitled" }}&quot; {{ puzzle.solve_time|timesince }} ago ({{ puzzle.guess_count }} in attempt{{ puzzle.guess_count|pluralize }})">
                #{{ puzzle.solve_rank }}
              </a>
            {% else %} {% if puzzle.guess_count %}
              <a href="/guess?t={{ team.key_id }}&n={{ puzzle.number }}"
                 class="guess_incorrect"
                 title="{{ team.name }} made {{ puzzle.guess_count }} attempt{{ puzzle.guess_count|pluralize }} for #{{ puzzle.number }} &quot;{{ puzzle.title|default:"Untitled" }}&quot;">
                {{ puzzle.guess_count }}x
              </a>
            {% else %}
              <a href="/guess?t={{ team.key_id }}&n={{ puzzle.number }}"
                 class="guess_none">
                --
              </a>
            {% endif %} {% endif %}
          {% endif %}
        </td>
      {% endfor %}
    </tr>
  {% endfor %}
</table>

<div style="margin-top: 5">
  <label>Add team: <input type="text" name="new_team" id="add_team" size="25"></label>
  <label>pw: <input type="text" name="new_password" size="10"></label>
</div>

<p><label><input type="checkbox" name="assign_numbers" value="true">
Assign puzzle numbers now
</label><br>
<label><input type="checkbox" name="login_enabled" value="true"
  {% if game.login_enabled %} checked {% endif %} >
Enable team logins
</label><br>
<label><input type="checkbox" name="solving_enabled" value="true"
  {% if game.solving_enabled %} checked {% endif %} >
Enable answer submission
</p>

<h3>Access to this admin page</h3>

<textarea name="admin_users" cols="40" rows="5" class="leftside">
{{ game.admin_users|join:"&#10;" }}</textarea>

<p class="rightside">Google usernames (eg. <em>joe.smith@gmail.com</em>),
separated by lines or commas.</p>

<p><button>Submit changes</button></p>
</form>

</div></body></html>  <!-- end .pagecontent -->
